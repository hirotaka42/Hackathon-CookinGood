{"ast":null,"code":"import _slicedToArray from\"/Users/user/src/github.com/hirotaka42/Hackathon-CookinGood/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from\"react\";import{CountdownCircleTimer}from'react-countdown-circle-timer';import\"./timer.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RenderTime=function RenderTime(_ref){var remainingTime=_ref.remainingTime;var currentTime=useRef(remainingTime);var prevTime=useRef(null);var isNewTimeFirstTick=useRef(false);var _useState=useState(0),_useState2=_slicedToArray(_useState,2),setOneLastRerender=_useState2[1];if(currentTime.current!==remainingTime){isNewTimeFirstTick.current=true;prevTime.current=currentTime.current;currentTime.current=remainingTime;}else{isNewTimeFirstTick.current=false;}// force one last re-render when the time is over to tirgger the last animation\nif(remainingTime===0){setTimeout(function(){setOneLastRerender(function(val){return val+1;});},20);}var isTimeUp=isNewTimeFirstTick.current;return/*#__PURE__*/_jsxs(\"div\",{className:\"time-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"time \".concat(isTimeUp?\"up\":\"\"),children:remainingTime},remainingTime),prevTime.current!==null&&/*#__PURE__*/_jsx(\"div\",{className:\"time \".concat(!isTimeUp?\"down\":\"\"),children:prevTime.current},prevTime.current)]});};var Timer=function Timer(_ref2){var duration=_ref2.duration,shouldRepeat=_ref2.shouldRepeat,delay=_ref2.delay;return/*#__PURE__*/_jsxs(\"div\",{className:\"timer-wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"CookingTimer\"}),/*#__PURE__*/_jsx(CountdownCircleTimer,{isPlaying:true,duration:duration,colors:['#004777','#F7B801','#A30000','#A30000'],colorsTime:[10,6,3,0],onComplete:function onComplete(){return{shouldRepeat:shouldRepeat,delay:delay};},children:RenderTime})]});};export default Timer;","map":{"version":3,"names":["React","useRef","useState","CountdownCircleTimer","RenderTime","remainingTime","currentTime","prevTime","isNewTimeFirstTick","setOneLastRerender","current","setTimeout","val","isTimeUp","Timer","duration","shouldRepeat","delay"],"sources":["/Users/user/src/github.com/hirotaka42/Hackathon-CookinGood/src/routes/timer.tsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { CountdownCircleTimer } from 'react-countdown-circle-timer';\nimport \"./timer.css\";\ntype Props = {\n    remainingTime: number;\n};\n\ntype TimeProps = {\n    duration: number;\n    shouldRepeat: boolean;\n    delay: number;\n\n};\n\nconst RenderTime: React.FC<Props> = ({ remainingTime }) => {\n    const currentTime = useRef(remainingTime);\n    const prevTime = useRef<number | null>(null);\n    const isNewTimeFirstTick = useRef(false);\n    const [, setOneLastRerender] = useState(0);\n\n    if (currentTime.current !== remainingTime) {\n        isNewTimeFirstTick.current = true;\n        prevTime.current = currentTime.current;\n        currentTime.current = remainingTime;\n    } else {\n        isNewTimeFirstTick.current = false;\n    }\n\n    // force one last re-render when the time is over to tirgger the last animation\n    if (remainingTime === 0) {\n        setTimeout(() => {\n            setOneLastRerender((val) => val + 1);\n        }, 20);\n    }\n\n    const isTimeUp = isNewTimeFirstTick.current;\n\n    return (\n        <div className=\"time-wrapper\">\n            <div key={remainingTime} className={`time ${isTimeUp ? \"up\" : \"\"}`}>\n                {remainingTime}\n            </div>\n            {prevTime.current !== null && (\n                <div\n                    key={prevTime.current}\n                    className={`time ${!isTimeUp ? \"down\" : \"\"}`}\n                >\n                    {prevTime.current}\n                </div>\n            )}\n        </div>\n    );\n};\n\n\n\nconst Timer: React.FC<TimeProps> = ({ duration, shouldRepeat, delay }) => {\n    return (\n        <div className='timer-wrapper'>\n            <h2>CookingTimer</h2>\n            <CountdownCircleTimer\n                isPlaying\n                duration={duration}\n                colors={['#004777', '#F7B801', '#A30000', '#A30000']}\n                colorsTime={[10, 6, 3, 0]}\n                onComplete={() => ({ shouldRepeat, delay })}\n            >\n                {RenderTime}\n            </CountdownCircleTimer>\n        </div >\n    );\n};\n\nexport default Timer;\n"],"mappings":"gJAAA,MAAOA,MAAK,EAAIC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAC/C,OAASC,oBAAoB,KAAQ,8BAA8B,CACnE,MAAO,aAAa,CAAC,wFAYrB,GAAMC,WAA2B,CAAG,QAA9BA,WAA2B,MAA0B,IAApBC,cAAa,MAAbA,aAAa,CAChD,GAAMC,YAAW,CAAGL,MAAM,CAACI,aAAa,CAAC,CACzC,GAAME,SAAQ,CAAGN,MAAM,CAAgB,IAAI,CAAC,CAC5C,GAAMO,mBAAkB,CAAGP,MAAM,CAAC,KAAK,CAAC,CACxC,cAA+BC,QAAQ,CAAC,CAAC,CAAC,wCAAjCO,kBAAkB,eAE3B,GAAIH,WAAW,CAACI,OAAO,GAAKL,aAAa,CAAE,CACvCG,kBAAkB,CAACE,OAAO,CAAG,IAAI,CACjCH,QAAQ,CAACG,OAAO,CAAGJ,WAAW,CAACI,OAAO,CACtCJ,WAAW,CAACI,OAAO,CAAGL,aAAa,CACvC,CAAC,IAAM,CACHG,kBAAkB,CAACE,OAAO,CAAG,KAAK,CACtC,CAEA;AACA,GAAIL,aAAa,GAAK,CAAC,CAAE,CACrBM,UAAU,CAAC,UAAM,CACbF,kBAAkB,CAAC,SAACG,GAAG,QAAKA,IAAG,CAAG,CAAC,GAAC,CACxC,CAAC,CAAE,EAAE,CAAC,CACV,CAEA,GAAMC,SAAQ,CAAGL,kBAAkB,CAACE,OAAO,CAE3C,mBACI,aAAK,SAAS,CAAC,cAAc,wBACzB,YAAyB,SAAS,gBAAUG,QAAQ,CAAG,IAAI,CAAG,EAAE,CAAG,UAC9DR,aAAa,EADRA,aAAa,CAEjB,CACLE,QAAQ,CAACG,OAAO,GAAK,IAAI,eACtB,YAEI,SAAS,gBAAU,CAACG,QAAQ,CAAG,MAAM,CAAG,EAAE,CAAG,UAE5CN,QAAQ,CAACG,OAAO,EAHZH,QAAQ,CAACG,OAAO,CAK5B,GACC,CAEd,CAAC,CAID,GAAMI,MAA0B,CAAG,QAA7BA,MAA0B,OAA0C,IAApCC,SAAQ,OAARA,QAAQ,CAAEC,YAAY,OAAZA,YAAY,CAAEC,KAAK,OAALA,KAAK,CAC/D,mBACI,aAAK,SAAS,CAAC,eAAe,wBAC1B,oBAAI,cAAY,EAAK,cACrB,KAAC,oBAAoB,EACjB,SAAS,MACT,QAAQ,CAAEF,QAAS,CACnB,MAAM,CAAE,CAAC,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,CACrD,UAAU,CAAE,CAAC,EAAE,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAC1B,UAAU,CAAE,4BAAO,CAAEC,YAAY,CAAZA,YAAY,CAAEC,KAAK,CAALA,KAAM,CAAC,EAAE,UAE3Cb,UAAU,EACQ,GACpB,CAEf,CAAC,CAED,cAAeU,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}